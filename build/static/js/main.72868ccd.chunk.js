(this["webpackJsonpquiz-app"]=this["webpackJsonpquiz-app"]||[]).push([[0],{103:function(e,t,c){},104:function(e,t,c){},105:function(e,t,c){"use strict";c.r(t);var n=c(1),s=c(2),r=c.n(s),a=c(45),o=c.n(a),i=c(14),l=c(9),j=c(5),u=function(){return Object(n.jsx)("nav",{children:Object(n.jsxs)("ul",{className:"navbar",children:[Object(n.jsx)("h2",{children:"Choose a category"}),Object(n.jsx)(l.b,{className:"navbar__item",to:"/category/?name=videogames&ctgry=15",children:"Videogames"}),Object(n.jsx)(l.b,{className:"navbar__item",to:"/category/?name=computer science&ctgry=18",children:"Computer science"}),Object(n.jsx)(l.b,{className:"navbar__item",to:"/category/?name=anime&ctgry=31",children:"Anime"}),Object(n.jsx)(l.b,{className:"navbar__item",to:"/category/?name=music&ctgry=12",children:"Music"})]})})},b=function(){return Object(n.jsxs)("div",{className:"home",children:[Object(n.jsx)("h1",{children:"QuizApp"}),Object(n.jsx)(u,{}),Object(n.jsxs)(l.b,{className:"scoreList__btn",to:"/scorelist",children:[Object(n.jsx)("i",{className:"fas fa-trophy"})," score list"]})]})},d=c(15),h=c(22),m=(c(57),c(106),new h.a.auth.GoogleAuthProvider);h.a.initializeApp({apiKey:"AIzaSyCXF-Yk_Qk3rPaHievQ4A4BPaVmnluQMjY",authDomain:"quiz-app-b5704.firebaseapp.com",projectId:"quiz-app-b5704",storageBucket:"quiz-app-b5704.appspot.com",messagingSenderId:"394576295386",appId:"1:394576295386:web:49e88dd04b397dae04fce3"});var O=h.a.firestore(),x=function(){var e=Object(s.useContext)(I),t=e.user,c=e.setUser;localStorage.getItem("isLoged");return Object(n.jsx)("div",{className:"register_screen",children:Object(n.jsxs)("form",{children:[Object(n.jsxs)("h1",{children:["Welcome Mr. ",t.name,"!"]}),Object(n.jsx)("input",{onChange:function(e){sessionStorage.setItem("username",e.target.value),c((function(t){return Object(d.a)(Object(d.a)({},t),{},{name:e.target.value})}))},autoComplete:"off",required:!0,type:"text",name:"name",placeholder:"Put your name",value:t.name}),t.name&&Object(n.jsx)(l.b,{to:"/home",children:"NEXT"}),Object(n.jsxs)("div",{className:"google-btn",onClick:function(){h.a.auth().signInWithPopup(m).then((function(e){console.log(e),e&&(localStorage.setItem("isLoged",!0),c((function(e){return Object(d.a)(Object(d.a)({},e),{},{isLoged:localStorage.getItem("isLoged")})})))})).catch((function(e){console.log(e)}))},children:[Object(n.jsx)("div",{className:"google-icon-wrapper",children:Object(n.jsx)("img",{className:"google-icon",src:"https://upload.wikimedia.org/wikipedia/commons/5/53/Google_%22G%22_Logo.svg",alt:"google button"})}),Object(n.jsx)("p",{className:"btn-text",children:Object(n.jsx)("b",{children:"Sign in with google"})})]}),Object(n.jsxs)("p",{children:["Sign up with Google if you want to see the score list and save your score"," "]})]})})},p=function(){var e=Object(s.useState)([]),t=Object(i.a)(e,2),c=t[0],r=t[1];Object(s.useEffect)((function(){return O.collection("users").onSnapshot((function(e){var t=[];e.forEach((function(e){t.push(e.data())})),r(t)})),function(){r((function(e){return e}))}}),[]);var a=localStorage.getItem("isLoged");return Object(n.jsxs)("div",{className:"scorelist",children:[Object(n.jsx)("h1",{className:"scorelist_title",children:"TOP PLAYERS"}),Object(n.jsxs)("table",{children:[Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{children:"Name"}),Object(n.jsx)("th",{children:"Score"}),Object(n.jsx)("th",{children:"Time"})]})}),Object(n.jsx)("tbody",{children:c.map((function(e,t){return Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{children:e.name}),Object(n.jsx)("td",{children:e.score}),Object(n.jsxs)("td",{children:[("0"+Math.floor(e.time/60).toString()).slice(-2),":",("0"+(e.time-60*Math.floor(e.time/60)).toString()).slice(-2)]})]},t)}))})]}),a?"":Object(n.jsx)("span",{className:"scorelist__warning",children:"Scorelist is only available for registered users"})]})},g=c(47),f=c.n(g),v=function(e){var t=e.answers,c=e.correct_answer,s=e.setQuestionsNumbr,r=e.setScore;return Object(n.jsx)(n.Fragment,{children:t[0]===c[0]?Object(n.jsx)("li",{onClick:function(){r((function(e){return e+1})),s((function(e){return e+1}))},className:"answer",children:t}):Object(n.jsx)("li",{onClick:function(){s((function(e){return e+1}))},className:"answer",children:t})})},N=c(25),_=c.n(N),w=function(e){var t=e.user;return Object(n.jsxs)("div",{className:"end_quiz-screen",children:[Object(n.jsx)("span",{className:"end_quiz-message",children:"Congratulations!"}),Object(n.jsxs)("span",{className:"end-quiz-score",children:["Your score: ",t.score]}),Object(n.jsx)(l.b,{to:"/scorelist",children:"Go to score list"})]})},y=function(){var e=Object(s.useContext)(I),t=e.user,c=e.setUser,r=Object(s.useState)(0),a=Object(i.a)(r,2),o=a[0],l=a[1],j=Object(s.useState)(0),u=Object(i.a)(j,2),b=u[0],h=u[1],m=Object(s.useState)(!1),x=Object(i.a)(m,2),p=x[0],g=x[1],N=Object(s.useRef)(0),y=function(e,t){var c=Object(s.useState)({data:null,loading:!0}),n=Object(i.a)(c,2),r=n[0],a=n[1];return Object(s.useEffect)((function(){fetch("https://opentdb.com/api.php?amount=1&category=".concat(e,"&type=multiple")).then((function(e){return e.json()})).then((function(e){var t=e.results[0],c=t.correct_answer,n=t.question,s=t.incorrect_answers;a({data:{correct_answer:c,question:n,incorrect_answers:s},loading:!1})}))}),[e,t]),r}(f.a.parse(window.location.search).ctgry,b),S=y.data,q=y.loading;if(Object(s.useEffect)((function(){var e=setInterval((function(){N.current++}),1e3);return 21===b&&(c((function(e){return Object(d.a)(Object(d.a)({},e),{},{time:N.current,score:o})})),g(!0),clearInterval(e)),function(){clearInterval(e),c((function(e){return Object(d.a)(Object(d.a)({},e),{},{score:null,time:0})}))}}),[c,o,b,q]),Object(s.useEffect)((function(){t.time&&O.collection("users").add(t)}),[t,b]),q)return Object(n.jsx)("h1",{className:"loader",children:"loading..."});var z=S||"",C=z.correct_answer,k=z.question,L=z.incorrect_answers;return 3===L.length&&L.splice(4*Math.random(),0,C),Object(n.jsxs)("div",{className:"quiz_screen",children:[Object(n.jsxs)("div",{className:"quizTable",children:[Object(n.jsx)("p",{className:"question",children:_()(k)}),Object(n.jsx)("ul",{className:"answers_container",children:L.map((function(e,t){return Object(n.jsx)(v,{answers:_()(e),correct_answer:_()(C),setQuestionsNumbr:h,setScore:l},t)}))})]}),Object(n.jsxs)("span",{className:"quiz_screen-counter",children:[b,"/20"]}),p&&Object(n.jsx)(w,{user:t})]})};function S(){return Object(n.jsx)(l.a,{children:Object(n.jsx)("div",{children:Object(n.jsxs)(j.d,{children:[Object(n.jsx)(j.b,{exact:!0,path:"/scorelist",component:p}),Object(n.jsx)(j.b,{exact:!0,path:"/category/",component:y}),Object(n.jsx)(j.a,{exact:!0,to:"/scorelist"})]})})})}function q(){return Object(n.jsx)(l.a,{children:Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)(j.d,{children:[Object(n.jsx)(j.b,{exact:!0,path:"/category/",component:S}),Object(n.jsx)(j.b,{exact:!0,path:"/home",component:b}),Object(n.jsx)(j.b,{exact:!0,path:"/scorelist",component:p}),Object(n.jsx)(j.b,{exact:!0,path:"/",component:x}),Object(n.jsx)(j.a,{to:"/"})]})})})}var I=r.a.createContext({}),z=function(){var e=Object(s.useState)({name:sessionStorage.getItem("username"),score:null,time:0,isLoged:!1}),t=Object(i.a)(e,2),c=t[0],r=t[1];return Object(n.jsx)(I.Provider,{value:{user:c,setUser:r},children:Object(n.jsx)(q,{})})};c(103),c(104);o.a.render(Object(n.jsx)(z,{}),document.getElementById("root"))},85:function(e,t){}},[[105,1,2]]]);
//# sourceMappingURL=main.72868ccd.chunk.js.map